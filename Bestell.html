<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BestellOnline</title>
    <style>
        .product-button { margin: 5px; padding: 10px; font-size: 14px; }
        .category-title { font-size: 18px; font-weight: bold; margin-top: 20px; }
        .order-item { margin: 5px; padding: 5px; font-size: 14px; }
        .remove-button { margin-left: 10px; background-color: red; color: white; padding: 5px; cursor: pointer; }
        .order-summary { margin-top: 20px; font-size: 16px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>BestellOnline</h1>

    <div id="productButtons"></div>
    <p id="totalPrice">Gesamtpreis: 0.00‚Ç¨</p>
    <p id="deposit">Pfand: 0.00‚Ç¨</p>
    <p id="toPay">Zuzahlender Betrag: 0.00‚Ç¨</p>

    <div id="orderSummary" class="order-summary">
        <h3>Bestell√ºbersicht</h3>
        <div id="orderItems"></div>
    </div>

    <button id="confirmOrderButton" onclick="confirmOrder()" style="display: none; margin-top: 20px;">Bestellung abschlie√üen</button>

    <script>
        const products = [
            { name: "Bratwurst", price: 3.5, category: "food", deposit: 0 },
            { name: "Currywurst", price: 4.5, category: "food", deposit: 0 },
            { name: "Pommes", price: 2.5, category: "food", deposit: 0 },
            { name: "Schnitzel", price: 8.5, category: "food", deposit: 5.0 },
            { name: "Salat", price: 4.0, category: "food", deposit: 5.0 },
            { name: "Ochsenbraten", price: 9.20, category: "food", deposit: 5.0 },
            { name: "Cola", price: 2.0, category: "drink", deposit: 1.0 },
            { name: "Fanta", price: 2.0, category: "drink", deposit: 1.0 },
            { name: "Wasser", price: 1.5, category: "drink", deposit: 1.0 },
            { name: "Bier", price: 4.0, category: "drink", deposit: 5.0 },
            { name: "Radler", price: 4.0, category: "drink", deposit: 5.0 },
            { name: "Weinschorle", price: 3.5, category: "drink", deposit: 5.0 },
            { name: "Apfelsaft", price: 2.5, category: "drink", deposit: 1.0 },
            { name: "Kaffee", price: 2.0, category: "drink", deposit: 2.0 },
            { name: "Hefeweizen", price: 3.8, category: "drink", deposit: 2.0 },
            { name: "Alkoholfreies Bier", price: 3.6, category: "drink", deposit: 5.0 },
            { name: "Alkoholfreies Hefe", price: 3.6, category: "drink", deposit: 2.0 }
        ];

        let order = [];
        let totalPrice = 0;
        let totalDeposit = 0;

        // Sortiere die Produkte nach Kategorie und dann alphabetisch nach Name
        const foodProducts = products.filter(p => p.category === "food").sort((a, b) => a.name.localeCompare(b.name));
        const drinkProducts = products.filter(p => p.category === "drink").sort((a, b) => a.name.localeCompare(b.name));

        // Funktion zur Anzeige der Produkte
        function displayProducts() {
            const productButtonsContainer = document.getElementById('productButtons');
            productButtonsContainer.innerHTML = ''; // Leere das Container, um die Produkte neu anzuzeigen

            // Essen Produkte
            const foodTitle = document.createElement('div');
            foodTitle.classList.add('category-title');
            foodTitle.textContent = "üç¥ Essen:";
            productButtonsContainer.appendChild(foodTitle);

            foodProducts.forEach(product => {
                const button = document.createElement('button');
                button.classList.add('product-button', 'food-button');
                button.textContent = `${product.name} - ${product.price.toFixed(2)}‚Ç¨`;
                button.onclick = () => addToOrder(product);
                productButtonsContainer.appendChild(button);
            });

            // Getr√§nke Produkte
            const drinkTitle = document.createElement('div');
            drinkTitle.classList.add('category-title');
            drinkTitle.textContent = "ü•§ Getr√§nke:";
            productButtonsContainer.appendChild(drinkTitle);

            drinkProducts.forEach(product => {
                const button = document.createElement('button');
                button.classList.add('product-button', 'drink-button');
                button.textContent = `${product.name} - ${product.price.toFixed(2)}‚Ç¨`;
                button.onclick = () => addToOrder(product);
                productButtonsContainer.appendChild(button);
            });
        }

        // Funktion zum Hinzuf√ºgen eines Produkts zur Bestellung
        function addToOrder(product) {
            order.push(product);
            totalPrice += product.price;
            totalDeposit += product.deposit;

            updateOrderDisplay();
        }

        // Funktion zum Entfernen eines Produkts aus der Bestellung
        function removeFromOrder(product) {
            const index = order.indexOf(product);
            if (index > -1) {
                order.splice(index, 1);
                totalPrice -= product.price;
                totalDeposit -= product.deposit;
                updateOrderDisplay();
            }
        }

        // Funktion zum Aktualisieren der Anzeige der Bestellung
        function updateOrderDisplay() {
            const totalPriceElement = document.getElementById('totalPrice');
            const depositElement = document.getElementById('deposit');
            const toPayElement = document.getElementById('toPay');
            const orderItemsElement = document.getElementById('orderItems');

            totalPriceElement.textContent = `Gesamtpreis: ${totalPrice.toFixed(2)}‚Ç¨`;
            depositElement.textContent = `Pfand: ${totalDeposit.toFixed(2)}‚Ç¨`;
            toPayElement.textContent = `Zuzahlender Betrag: ${(totalPrice - totalDeposit).toFixed(2)}‚Ç¨`;

            // Bestell√ºbersicht aktualisieren
            orderItemsElement.innerHTML = '';
            order.forEach(product => {
                const orderItem = document.createElement('div');
                orderItem.classList.add('order-item');
                orderItem.textContent = `${product.name} - ${product.price.toFixed(2)}‚Ç¨`;
                const removeButton = document.createElement('button');
                removeButton.classList.add('remove-button');
                removeButton.textContent = "Entfernen";
                removeButton.onclick = () => removeFromOrder(product);
                orderItem.appendChild(removeButton);
                orderItemsElement.appendChild(orderItem);
            });

            // Bestellbutton anzeigen, wenn Artikel in der Bestellung sind
            if (order.length > 0) {
                document.getElementById('confirmOrderButton').style.display = 'block';
            } else {
                document.getElementById('confirmOrderButton').style.display = 'none';
            }
        }

        // Bestellbest√§tigung
        function confirmOrder() {
            alert(`Bestellung abgeschlossen! Gesamtpreis: ${(totalPrice - totalDeposit).toFixed(2)}‚Ç¨`);
            order = [];
            totalPrice = 0;
            totalDeposit = 0;
            updateOrderDisplay();
        }

        // Aufruf der Funktion zur Anzeige der Produkte
        displayProducts();
    </script>
</body>
</html>
